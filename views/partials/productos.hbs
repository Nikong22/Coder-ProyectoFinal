<table class="table table-dark">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Producto</th>
            <th scope="col">Descripcion</th>
            <th scope="col">Categoria</th>
            <th scope="col">Codigo</th>
            <th scope="col">Precio</th>
            <th scope="col">Imagen</th>
            <th scope="col">Stock</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
    {{#each productos}}
        <tr>
            <th scope="row">{{this.id}}</th>
            <td><a href="/api/producto/{{this._id}}" style=" border: none; color: white; text-decoration: none">{{this.name}}</a></td>
            <td><a href="/api/producto/{{this._id}}" style=" border: none; color: white; text-decoration: none">{{this.description}}</a></td>
            <td>{{this.category}}</td>
            <td>{{this.code}}</td>
            <td>{{this.price}}</td>
            <td><img src="{{this.thumbnail}}" width= "35"  alt="url"></td>
            <td>{{this.stock}}</td>
            <td>
                <form method="post" action="/api/carrito/agregar_producto/{{this._id}}">
                    <input type="number" id="stock" name="stock" min="1" max="{{this.stock}}" value="1">
                    <button type="submit">
                    <img src="https://cdn4.iconfinder.com/data/icons/erp-software-icon-set-1/512/new_purchase-256.png" width= "25"  alt="url">
                    </button>
                </form>
            </td>
        </tr>
    {{/each}}
    </tbody>
</table>

<script>
    const agregar = (producto_id, stock) => {
        if(document.getElementById('add_prod_' + producto_id).value <= stock){
            console.log('/agregar/' + producto_id + '/' + document.getElementById('add_prod_' + producto_id).value)
            location.href = '/agregar/' + producto_id + '/' + document.getElementById('add_prod_' + producto_id).value
        }else{
            alert('No hay stock suficiente')
        }
    }
</script>